<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_231) on Tue Oct 13 09:12:43 CDT 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TimeUtil</title>
<meta name="date" content="2020-10-13">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TimeUtil";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9,"i17":9,"i18":9,"i19":9,"i20":9,"i21":9,"i22":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../org/hapiserver/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TimeUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../org/hapiserver/URITemplate.html" title="class in org.hapiserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?org/hapiserver/TimeUtil.html" target="_top">Frames</a></li>
<li><a href="TimeUtil.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.hapiserver</div>
<h2 title="Class TimeUtil" class="title">Class TimeUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.hapiserver.TimeUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">TimeUtil</span>
extends java.lang.Object</pre>
<div class="block">Utilities for times in IsoTime strings (limited set of ISO8601 times)
 Examples of isoTime strings include:<ul>
 <li>2020-04-21Z
 <li>2020-04-21T12:20Z
 <li>2020-04-21T23:45:67.000000001Z (nanosecond limit)
 <li>2020-112Z (day-of-year instead of $Y-$m-$d)
 <li>2020-112T23:45:67.000000001 (note Z is assumed)
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#iso8601duration">iso8601duration</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.regex.Pattern</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#iso8601DurationPattern">iso8601DurationPattern</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#add-int:A-int:A-">add</a></span>(int[]&nbsp;base,
   int[]&nbsp;offset)</code>
<div class="block">add the offset to the base time.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#ceil-java.lang.String-">ceil</a></span>(java.lang.String&nbsp;time)</code>
<div class="block">return the $Y-$m-$dT00:00:00.000000000Z of the next boundary, or the same
 value (normalized) if we are already at a boundary.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#countOffDays-java.lang.String-java.lang.String-">countOffDays</a></span>(java.lang.String&nbsp;startTime,
            java.lang.String&nbsp;stopTime)</code>
<div class="block">count off the days between startTime and stopTime, but not including
 stopTime.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#dayOfYear-int-int-int-">dayOfYear</a></span>(int&nbsp;year,
         int&nbsp;month,
         int&nbsp;day)</code>
<div class="block">return the doy of year of the month and day for the year.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#floor-java.lang.String-">floor</a></span>(java.lang.String&nbsp;time)</code>
<div class="block">return the $Y-$m-$dT00:00:00.000000000Z of the next boundary, or the same
 value (normalized) if we are already at a boundary.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#formatIso8601Duration-int:A-">formatIso8601Duration</a></span>(int[]&nbsp;nn)</code>
<div class="block">format the duration into human-readable time.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#fromJulianDay-int-">fromJulianDay</a></span>(int&nbsp;julian)</code>
<div class="block">Break the Julian day apart into month, day year.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#isoTimeFromArray-int:A-">isoTimeFromArray</a></span>(int[]&nbsp;nn)</code>
<div class="block">return the array formatted as ISO8601 time, formatted to nanoseconds.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#isoTimeToArray-java.lang.String-">isoTimeToArray</a></span>(java.lang.String&nbsp;time)</code>
<div class="block">return array [ year, months, days, hours, minutes, seconds, nanoseconds ]
 preserving the day of year notation if this was used.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#julianDay-int-int-int-">julianDay</a></span>(int&nbsp;year,
         int&nbsp;month,
         int&nbsp;day)</code>
<div class="block">return the julianDay for the year month and day.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#monthForDayOfYear-int-int-">monthForDayOfYear</a></span>(int&nbsp;year,
                 int&nbsp;doy)</code>
<div class="block">return "2" (February) for 45 for example.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#monthNameAbbrev-int-">monthNameAbbrev</a></span>(int&nbsp;i)</code>
<div class="block">return the English month name, abbreviated to three letters, for the
 month number.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#monthNumber-java.lang.String-">monthNumber</a></span>(java.lang.String&nbsp;s)</code>
<div class="block">return the month number for the English month name, such as "Jan" (1) or
 "December" (12).</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#nextDay-java.lang.String-">nextDay</a></span>(java.lang.String&nbsp;day)</code>
<div class="block">return the next day boundary.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#normalizeTime-int:A-">normalizeTime</a></span>(int[]&nbsp;time)</code>
<div class="block">normalize the decomposed time by expressing day of year and month and day
 of month, and moving hour="24" into the next day.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#normalizeTimeString-java.lang.String-">normalizeTimeString</a></span>(java.lang.String&nbsp;time)</code>
<div class="block">return $Y-$m-$dT$H:$M:$S.$(subsec,places=9)Z</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#now--">now</a></span>()</code>
<div class="block">return the current time, to the millisecond.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#parseISO8601Duration-java.lang.String-">parseISO8601Duration</a></span>(java.lang.String&nbsp;stringIn)</code>
<div class="block">returns a 7 element array with [year,mon,day,hour,min,sec,nanos].</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#parseISO8601TimeRange-java.lang.String-">parseISO8601TimeRange</a></span>(java.lang.String&nbsp;stringIn)</code>
<div class="block">parse the ISO8601 time range, like "1998-01-02/1998-01-17", into
 start and stop times, returned in a 14 element array of ints.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#previousDay-java.lang.String-">previousDay</a></span>(java.lang.String&nbsp;day)</code>
<div class="block">return the previous day boundary.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#reformatIsoTime-java.lang.String-java.lang.String-">reformatIsoTime</a></span>(java.lang.String&nbsp;exampleForm,
               java.lang.String&nbsp;time)</code>
<div class="block">Rewrite the time using the format of the example time.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#subtract-int:A-int:A-">subtract</a></span>(int[]&nbsp;base,
        int[]&nbsp;offset)</code>
<div class="block">subtract the offset from the base time.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/hapiserver/TimeUtil.html#toMillisecondsSince1970-java.lang.String-">toMillisecondsSince1970</a></span>(java.lang.String&nbsp;time)</code>
<div class="block">return the time as milliseconds since 1970-01-01T00:00Z.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="iso8601duration">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iso8601duration</h4>
<pre>public static final&nbsp;java.lang.String iso8601duration</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#org.hapiserver.TimeUtil.iso8601duration">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="iso8601DurationPattern">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>iso8601DurationPattern</h4>
<pre>public static final&nbsp;java.util.regex.Pattern iso8601DurationPattern</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="reformatIsoTime-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reformatIsoTime</h4>
<pre>public static&nbsp;java.lang.String&nbsp;reformatIsoTime(java.lang.String&nbsp;exampleForm,
                                               java.lang.String&nbsp;time)</pre>
<div class="block">Rewrite the time using the format of the example time. For example,
 <pre>
 <code>
 from org.hapiserver.TimeUtil import *
 print rewriteIsoTime( '2020-01-01T00:00Z', '2020-112Z' ) # -&gt;  '2020-04-21T00:00Z'
 </code>
 </pre> This allows direct comparisons of times for sorting. TODO: there's
 an optimization here, where if input and output are both $Y-$j or both
 $Y-$m-$d, then we need not break apart and recombine the time
 (isoTimeToArray call can be avoided).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>exampleForm</code> - isoTime string.</dd>
<dd><code>time</code> - the time in any allowed isoTime format</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>same time but in the same form as exampleForm.</dd>
</dl>
</li>
</ul>
<a name="monthNameAbbrev-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>monthNameAbbrev</h4>
<pre>public static&nbsp;java.lang.String&nbsp;monthNameAbbrev(int&nbsp;i)</pre>
<div class="block">return the English month name, abbreviated to three letters, for the
 month number.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>i</code> - month number, from 1 to 12.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the month name, like "Jan" or "Dec"</dd>
</dl>
</li>
</ul>
<a name="monthNumber-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>monthNumber</h4>
<pre>public static&nbsp;int&nbsp;monthNumber(java.lang.String&nbsp;s)
                       throws java.text.ParseException</pre>
<div class="block">return the month number for the English month name, such as "Jan" (1) or
 "December" (12). The first three letters are used to look up the number,
 and must be one of: "Jan", "Feb", "Mar", "Apr", "May", "Jun",
 "Jul", "Aug", "Sep", "Oct", "Nov", or "Dec" (case insensitive).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - the name (case-insensitive, only the first three letters are
 used.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number, for example 1 for "January"</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.text.ParseException</code> - when month name is not recognized.</dd>
</dl>
</li>
</ul>
<a name="countOffDays-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countOffDays</h4>
<pre>public static&nbsp;java.lang.String[]&nbsp;countOffDays(java.lang.String&nbsp;startTime,
                                              java.lang.String&nbsp;stopTime)</pre>
<div class="block">count off the days between startTime and stopTime, but not including
 stopTime.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startTime</code> - an iso time string</dd>
<dd><code>stopTime</code> - an iso time string</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>array of times, complete days, in the form $Y-$m-$d</dd>
</dl>
</li>
</ul>
<a name="nextDay-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextDay</h4>
<pre>public static&nbsp;java.lang.String&nbsp;nextDay(java.lang.String&nbsp;day)</pre>
<div class="block">return the next day boundary. Note hours, minutes, seconds and
 nanoseconds are ignored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>day</code> - any isoTime format string.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next day in $Y-$m-$dZ</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#ceil-java.lang.String-"><code>ceil(java.lang.String)</code></a>, 
<a href="../../org/hapiserver/TimeUtil.html#previousDay-java.lang.String-"><code>previousDay(java.lang.String)</code></a></dd>
</dl>
</li>
</ul>
<a name="previousDay-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>previousDay</h4>
<pre>public static&nbsp;java.lang.String&nbsp;previousDay(java.lang.String&nbsp;day)</pre>
<div class="block">return the previous day boundary. Note hours, minutes, seconds and
 nanoseconds are ignored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>day</code> - any isoTime format string.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next day in $Y-$m-$dZ</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#floor-java.lang.String-"><code>floor(java.lang.String)</code></a>, 
<a href="../../org/hapiserver/TimeUtil.html#nextDay-java.lang.String-"><code>nextDay(java.lang.String)</code></a></dd>
</dl>
</li>
</ul>
<a name="ceil-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ceil</h4>
<pre>public static&nbsp;java.lang.String&nbsp;ceil(java.lang.String&nbsp;time)</pre>
<div class="block">return the $Y-$m-$dT00:00:00.000000000Z of the next boundary, or the same
 value (normalized) if we are already at a boundary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - any isoTime format string.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next midnight or the value if already at midnight.</dd>
</dl>
</li>
</ul>
<a name="floor-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>floor</h4>
<pre>public static&nbsp;java.lang.String&nbsp;floor(java.lang.String&nbsp;time)</pre>
<div class="block">return the $Y-$m-$dT00:00:00.000000000Z of the next boundary, or the same
 value (normalized) if we are already at a boundary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - any isoTime format string.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the previous midnight or the value if already at midnight.</dd>
</dl>
</li>
</ul>
<a name="normalizeTimeString-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>normalizeTimeString</h4>
<pre>public static&nbsp;java.lang.String&nbsp;normalizeTimeString(java.lang.String&nbsp;time)</pre>
<div class="block">return $Y-$m-$dT$H:$M:$S.$(subsec,places=9)Z</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - any isoTime format string.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the time in standard form.</dd>
</dl>
</li>
</ul>
<a name="isoTimeFromArray-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isoTimeFromArray</h4>
<pre>public static&nbsp;java.lang.String&nbsp;isoTimeFromArray(int[]&nbsp;nn)</pre>
<div class="block">return the array formatted as ISO8601 time, formatted to nanoseconds.
 For example,  int[] nn = new int[] { 1999, 12, 31, 23, 0, 0, 0  } is
 formatted to "1999-12-31T23:00:00.000000000Z";</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nn</code> - the decomposed time</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the formatted time.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#isoTimeToArray-java.lang.String-"><code>isoTimeToArray(java.lang.String)</code></a></dd>
</dl>
</li>
</ul>
<a name="formatIso8601Duration-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>formatIso8601Duration</h4>
<pre>public static&nbsp;java.lang.String&nbsp;formatIso8601Duration(int[]&nbsp;nn)</pre>
<div class="block">format the duration into human-readable time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nn</code> - array of [ Y m d H M S nanos ]</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ISO8601 duration</dd>
</dl>
</li>
</ul>
<a name="now--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>now</h4>
<pre>public static&nbsp;int[]&nbsp;now()</pre>
<div class="block">return the current time, to the millisecond.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current time, to the millisecond.</dd>
</dl>
</li>
</ul>
<a name="isoTimeToArray-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isoTimeToArray</h4>
<pre>public static&nbsp;int[]&nbsp;isoTimeToArray(java.lang.String&nbsp;time)</pre>
<div class="block">return array [ year, months, days, hours, minutes, seconds, nanoseconds ]
 preserving the day of year notation if this was used. See the class
 documentation for allowed time formats, which are a subset of ISO8601
 times.  This also supports "now", "now-P1D", and other simple extensions.
 The following are valid inputs:<ul>
 <li>2021
 <li>2020-01-01
 <li>2020-01-01Z
 <li>2020-01-01T00Z
 <li>2020-01-01T00:00Z
 <li>now
 <li>now-P1D
 <li>lastday-P1D
 <li>lasthour-PT1H
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - isoTime to decompose</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the decomposed time</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - when the time cannot be parsed.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#isoTimeFromArray-int:A-"><code>isoTimeFromArray(int[])</code></a></dd>
</dl>
</li>
</ul>
<a name="dayOfYear-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dayOfYear</h4>
<pre>public static&nbsp;int&nbsp;dayOfYear(int&nbsp;year,
                            int&nbsp;month,
                            int&nbsp;day)</pre>
<div class="block">return the doy of year of the month and day for the year. For example, in
 Jython:
 <pre>
 <code>
 from org.hapiserver.TimeUtil import *
 print dayOfYear( 2020, 4, 21 ) # 112
 </code>
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>year</code> - the year</dd>
<dd><code>month</code> - the month, from 1 to 12.</dd>
<dd><code>day</code> - the day in the month.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the day of year.</dd>
</dl>
</li>
</ul>
<a name="monthForDayOfYear-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>monthForDayOfYear</h4>
<pre>public static&nbsp;int&nbsp;monthForDayOfYear(int&nbsp;year,
                                    int&nbsp;doy)</pre>
<div class="block">return "2" (February) for 45 for example.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>year</code> - the year</dd>
<dd><code>doy</code> - the day of year.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the month 1-12 of the day.</dd>
</dl>
</li>
</ul>
<a name="toMillisecondsSince1970-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toMillisecondsSince1970</h4>
<pre>public static&nbsp;long&nbsp;toMillisecondsSince1970(java.lang.String&nbsp;time)</pre>
<div class="block">return the time as milliseconds since 1970-01-01T00:00Z. This does not
 include leap seconds. For example, in Jython:
 <pre>
 <code>
 from org.hapiserver.TimeUtil import *
 x= toMillisecondsSince1970('2000-01-02T00:00:00.0Z')
 print x / 86400000   # 10958.0 days
 print x % 86400000   # and no milliseconds
 </code>
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - the isoTime, which is parsed using
 DateTimeFormatter.ISO_INSTANT.parse.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of non-leap-second milliseconds since 1970-01-01T00:00Z.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>DateTimeFormatter.parse(java.lang.CharSequence)</code></dd>
</dl>
</li>
</ul>
<a name="normalizeTime-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>normalizeTime</h4>
<pre>public static&nbsp;void&nbsp;normalizeTime(int[]&nbsp;time)</pre>
<div class="block">normalize the decomposed time by expressing day of year and month and day
 of month, and moving hour="24" into the next day. This also handles day
 increment or decrements, by:<ul>
 <li>handle day=0 by decrementing month and adding the days in the new
 month.
 <li>handle day=32 by incrementing month.
 <li>handle negative components by borrowing from the next significant.
 </ul>
 Note that [Y,1,dayOfYear,...] is accepted, but the result will be Y,m,d.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - the seven-component time Y,m,d,H,M,S,nanoseconds</dd>
</dl>
</li>
</ul>
<a name="parseISO8601Duration-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseISO8601Duration</h4>
<pre>public static&nbsp;int[]&nbsp;parseISO8601Duration(java.lang.String&nbsp;stringIn)
                                  throws java.text.ParseException</pre>
<div class="block">returns a 7 element array with [year,mon,day,hour,min,sec,nanos]. Note
 this does not allow fractional day, hours or minutes! Examples
 include:<ul>
 <li>P1D - one day
 <li>PT1M - one minute
 <li>PT0.5S - 0.5 seconds
 </ul>
 TODO: there exists more complete code elsewhere.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stringIn</code> - theISO8601 duration.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>7-element array with [year,mon,day,hour,min,sec,nanos]</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.text.ParseException</code> - if the string does not appear to be valid.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#iso8601duration"><code>iso8601duration</code></a></dd>
</dl>
</li>
</ul>
<a name="parseISO8601TimeRange-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseISO8601TimeRange</h4>
<pre>public static&nbsp;int[]&nbsp;parseISO8601TimeRange(java.lang.String&nbsp;stringIn)
                                   throws java.text.ParseException</pre>
<div class="block">parse the ISO8601 time range, like "1998-01-02/1998-01-17", into
 start and stop times, returned in a 14 element array of ints.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stringIn</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the time start and stop [ Y,m,d,H,M,S,nano, Y,m,d,H,M,S,nano ]</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.text.ParseException</code></dd>
</dl>
</li>
</ul>
<a name="julianDay-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>julianDay</h4>
<pre>public static&nbsp;int&nbsp;julianDay(int&nbsp;year,
                            int&nbsp;month,
                            int&nbsp;day)</pre>
<div class="block">return the julianDay for the year month and day. This was verified
 against another calculation (julianDayWP, commented out above) from
 http://en.wikipedia.org/wiki/Julian_day. Both calculations have 20
 operations.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>year</code> - calendar year greater than 1582.</dd>
<dd><code>month</code> - the month number 1 through 12.</dd>
<dd><code>day</code> - day of month. For day of year, use month=1 and doy for day.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the Julian day</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#fromJulianDay-int-"><code>fromJulianDay(int)</code></a></dd>
</dl>
</li>
</ul>
<a name="fromJulianDay-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fromJulianDay</h4>
<pre>public static&nbsp;int[]&nbsp;fromJulianDay(int&nbsp;julian)</pre>
<div class="block">Break the Julian day apart into month, day year. This is based on
 http://en.wikipedia.org/wiki/Julian_day (GNU Public License), and was
 introduced when toTimeStruct failed when the year was 1886.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>julian</code> - the (integer) number of days that have elapsed since the
 initial epoch at noon Universal Time (UT) Monday, January 1, 4713 BC</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a TimeStruct with the month, day and year fields set.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../org/hapiserver/TimeUtil.html#julianDay-int-int-int-"><code>julianDay( int year, int mon, int day )</code></a></dd>
</dl>
</li>
</ul>
<a name="subtract-int:A-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subtract</h4>
<pre>public static&nbsp;int[]&nbsp;subtract(int[]&nbsp;base,
                             int[]&nbsp;offset)</pre>
<div class="block">subtract the offset from the base time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>base</code> - a time</dd>
<dd><code>offset</code> - offset in each component.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a time</dd>
</dl>
</li>
</ul>
<a name="add-int:A-int:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>add</h4>
<pre>public static&nbsp;int[]&nbsp;add(int[]&nbsp;base,
                        int[]&nbsp;offset)</pre>
<div class="block">add the offset to the base time. This should not be used to combine two
 offsets, because the code has not been verified for this use.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>base</code> - a time</dd>
<dd><code>offset</code> - offset in each component.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a time</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../org/hapiserver/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TimeUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../org/hapiserver/URITemplate.html" title="class in org.hapiserver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?org/hapiserver/TimeUtil.html" target="_top">Frames</a></li>
<li><a href="TimeUtil.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
